<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Hello.js</title>
        <meta name="description" content="">
        <meta name="theme-color" content="rgb(95, 18, 236)">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="./manifest.json">
        <link href="./css/material.min.css" rel="stylesheet" type="text/css" />
        <script src="./js/material.min.js"></script>
    </head>
    <body>
      <style>
        div#color-container * {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        #color-container {
          padding: 4em 4em 6em;
          text-align: center;
          color: #f5f5f5;
        }
      </style>

      <div id="color-container">
        <form onsubmit="event.preventDefault();greet(event)">
          <span class="mdl-typography--display-3">Hello,</span>
          <div class="mdl-textfield mdl-js-textfield">
            <input type="text" class="mdl-textfield__input" value="tim.js" id="color-setter" />
          </div>
          <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" style="margin-top: 2em; background: #f5f5f5">Greet me!</button>
        </form>
      </div>

      <script>
        function stringToColor(str) {
            // str to hash
            for (var i = 0, hash = 0; i < str.length; hash = str.charCodeAt(i++) + ((hash << 5) - hash));

            // int/hash to hex
            for (var i = 0, color = "#"; i < 3; color += ("00" + ((hash >> i++ * 8) & 0xFF).toString(16)).slice(-2));

            return color;
        }

        function greet(event) {
          alert('hello, ' + event.target[0].value + '!')
        }

        var container = document.getElementById('color-container');
        var themeColor = document.head.querySelector('meta[name="theme-color"]');
        var setter = document.getElementById('color-setter');

        var startValue = stringToColor(setter.value);

        container.style.backgroundColor = startValue;
        themeColor.content = startValue;

        setter.addEventListener('keyup', function(e) {
          var newColor = stringToColor(e.target.value);

          container.style.backgroundColor = newColor;
          themeColor.content = newColor;
        }, false);
      </script>
    </body>
</html>
